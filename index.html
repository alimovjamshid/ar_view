<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>AR View</title>
    <script>
      function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent);
      }

      function isAndroid() {
        return /Android/.test(navigator.userAgent);
      }

      window.onload = function () {
        const urlParams = new URLSearchParams(window.location.search);
        const usdzModel = urlParams.get("model");
        const glbModel = urlParams.get("preview");

        if (isIOS() && usdzModel) {
          window.location.href = usdzModel + "#quicklook";
        } else if (isAndroid() && glbModel) {
          const sceneViewerUrl =
            "intent://arvr.google.com/scene-viewer/1.0?file=" +
            encodeURIComponent(glbModel) +
            "&mode=ar_preferred#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=https://play.google.com/store/apps/details?id=com.google.ar.core;end;";
          window.location.href = sceneViewerUrl;
        } else {
          document.body.innerHTML =
            "<h3 style='text-align:center;'>AR qurilmangiz qoâ€˜llab-quvvatlanmaydi</h3>";
        }
      };
    </script>
  </head>
  <body>
    <p style="text-align:center;">AR model yuklanmoqda...</p>
  </body>
</html>
